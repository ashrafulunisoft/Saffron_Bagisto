Apologies for the confusion earlier! Let's go through **Phase 5** of your project and provide the **migration tables** and **models** one by one, based on the content you shared. I will ensure all the necessary tables and models are covered, including **products**, **orders**, **categories**, **inventory**, **cart**, **user management**, etc.

---

### **Phase 5 Migration Tables and Models**

#### **1. Product Catalog System**

##### **Products Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_products_table.php
public function up()
{
    Schema::create('products', function (Blueprint $table) {
        $table->id();
        $table->string('sku')->unique();
        $table->string('name');
        $table->string('name_bn')->nullable(); // Bengali name
        $table->text('description');
        $table->text('description_bn')->nullable(); // Bengali description
        $table->decimal('base_price', 10, 2); // Price in BDT
        $table->decimal('compare_price', 10, 2)->nullable();
        $table->decimal('cost_price', 10, 2)->nullable();
        $table->integer('stock_quantity')->default(0);
        $table->boolean('is_active')->default(true);
        $table->timestamps();
        $table->softDeletes();
    });
}
```

##### **Product Model**

```php
// app/Models/Product.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Product extends Model
{
    use HasFactory;

    protected $fillable = [
        'sku', 'name', 'name_bn', 'description', 'description_bn', 'base_price', 'compare_price', 'cost_price', 'stock_quantity', 'is_active'
    ];

    public function category()
    {
        return $this->belongsTo(Category::class);
    }

    public function images()
    {
        return $this->hasMany(ProductImage::class);
    }

    public function variants()
    {
        return $this->hasMany(ProductVariant::class);
    }

    public function reviews()
    {
        return $this->hasMany(ProductReview::class);
    }
}
```

---

#### **2. Categories Table Migration**

##### **Categories Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_categories_table.php
public function up()
{
    Schema::create('categories', function (Blueprint $table) {
        $table->id();
        $table->string('name');
        $table->string('name_bn')->nullable(); // Bengali name
        $table->string('slug');
        $table->foreignId('parent_id')->nullable()->constrained('categories');
        $table->timestamps();
        $table->softDeletes();
    });
}
```

##### **Category Model**

```php
// app/Models/Category.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Category extends Model
{
    use HasFactory;

    protected $fillable = [
        'name', 'name_bn', 'slug', 'parent_id'
    ];

    public function parent()
    {
        return $this->belongsTo(Category::class, 'parent_id');
    }

    public function products()
    {
        return $this->hasMany(Product::class);
    }
}
```

---

#### **3. Cart System**

##### **Carts Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_carts_table.php
public function up()
{
    Schema::create('carts', function (Blueprint $table) {
        $table->id();
        $table->foreignId('user_id')->nullable()->constrained()->onDelete('set null');
        $table->foreignId('session_id')->nullable()->constrained()->onDelete('cascade');
        $table->decimal('total_amount', 10, 2);
        $table->timestamps();
    });
}
```

##### **Cart Model**

```php
// app/Models/Cart.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Cart extends Model
{
    use HasFactory;

    protected $fillable = [
        'user_id', 'session_id', 'total_amount'
    ];

    public function user()
    {
        return $this->belongsTo(User::class);
    }

    public function items()
    {
        return $this->hasMany(CartItem::class);
    }
}
```

##### **CartItems Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_cart_items_table.php
public function up()
{
    Schema::create('cart_items', function (Blueprint $table) {
        $table->id();
        $table->foreignId('cart_id')->constrained()->onDelete('cascade');
        $table->foreignId('product_id')->constrained()->onDelete('cascade');
        $table->integer('quantity');
        $table->decimal('price', 10, 2);
        $table->timestamps();
    });
}
```

##### **CartItem Model**

```php
// app/Models/CartItem.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class CartItem extends Model
{
    use HasFactory;

    protected $fillable = [
        'cart_id', 'product_id', 'quantity', 'price'
    ];

    public function cart()
    {
        return $this->belongsTo(Cart::class);
    }

    public function product()
    {
        return $this->belongsTo(Product::class);
    }
}
```

---

#### **4. Order Management System**

##### **Orders Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_orders_table.php
public function up()
{
    Schema::create('orders', function (Blueprint $table) {
        $table->id();
        $table->foreignId('user_id')->constrained()->onDelete('cascade');
        $table->decimal('total_amount', 10, 2);
        $table->enum('status', ['pending', 'completed', 'cancelled'])->default('pending');
        $table->timestamps();
        $table->softDeletes();
    });
}
```

##### **Order Model**

```php
// app/Models/Order.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Order extends Model
{
    use HasFactory;

    protected $fillable = [
        'user_id', 'total_amount', 'status'
    ];

    public function user()
    {
        return $this->belongsTo(User::class);
    }

    public function items()
    {
        return $this->hasMany(OrderItem::class);
    }

    public function payments()
    {
        return $this->hasMany(Payment::class);
    }
}
```

##### **OrderItems Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_order_items_table.php
public function up()
{
    Schema::create('order_items', function (Blueprint $table) {
        $table->id();
        $table->foreignId('order_id')->constrained()->onDelete('cascade');
        $table->foreignId('product_id')->constrained()->onDelete('cascade');
        $table->integer('quantity');
        $table->decimal('price', 10, 2);
        $table->timestamps();
    });
}
```

##### **OrderItem Model**

```php
// app/Models/OrderItem.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class OrderItem extends Model
{
    use HasFactory;

    protected $fillable = [
        'order_id', 'product_id', 'quantity', 'price'
    ];

    public function order()
    {
        return $this->belongsTo(Order::class);
    }

    public function product()
    {
        return $this->belongsTo(Product::class);
    }
}
```

---

#### **5. Inventory System**

##### **Inventory Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_inventories_table.php
public function up()
{
    Schema::create('inventories', function (Blueprint $table) {
        $table->id();
        $table->foreignId('product_id')->constrained()->onDelete('cascade');
        $table->integer('quantity');
        $table->integer('reserved_quantity')->default(0);
        $table->timestamps();
    });
}
```

##### **Inventory Model**

```php
// app/Models/Inventory.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Inventory extends Model
{
    use HasFactory;

    protected $fillable = [
        'product_id', 'quantity', 'reserved_quantity'
    ];

    public function product()
    {
        return $this->belongsTo(Product::class);
    }
}
```

---

### **6. Pricing System**

##### **Pricing Table Migration**

```php
// database/migrations/xxxx_xx_xx_create_pricing_table.php
public function up()
{
    Schema::create('pricing', function (Blueprint $table) {
        $table->id();
        $table->foreignId('product_id')->constrained()->onDelete('cascade');
        $table->decimal('base_price', 10, 2);
        $table->decimal('discount_price', 10, 2)->nullable();
        $table->decimal('final_price', 10, 2);
        $table->timestamps();
    });
}
```

##### **Pricing Model**

```php
// app/Models/Pricing.php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Pricing extends Model
{
    use HasFactory;

    protected $fillable = [
        'product_id', 'base_price', 'discount_price', 'final_price'
    ];

    public function product()
    {
        return $this->belongsTo(Product::class);
    }
}
```

---

These are the **migration tables** and **models** based on **Phase 5**. Let me know if any adjustments are needed!
